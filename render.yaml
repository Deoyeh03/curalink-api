services:
  - type: web
    name: curalink-backend
    env: node
    rootDir: .
    buildCommand: "npm install"
    startCommand: "node src/server.js"
    plan: free
    autoDeploy: true
    region: frankfurt
    healthCheckPath: "/health"

    envVars:
      - key: NODE_ENV
        value: production

      - key: PORT
        value: 10000

      # --- Required Secrets (set manually in Render Dashboard) ---
      - key: MONGODB_URI
        sync: false

      - key: JWT_SECRET
        sync: false

      - key: JWT_REFRESH_SECRET
        sync: false

      - key: OPENAI_API_KEY
        sync: false

      # --- Optional ---
      - key: USE_MOCK_AI
        value: "false"

      - key: CORS_ORIGIN
        value: "https://your-frontend-domain.com"

      - key: RATE_LIMIT_WINDOW
        value: "900000"

      - key: RATE_LIMIT_MAX
        value: "100"

      - key: AI_RATE_LIMIT_MAX
        value: "50"
